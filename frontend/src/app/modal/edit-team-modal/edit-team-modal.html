<h2 mat-dialog-title>Edit team</h2>

<mat-dialog-content class="dialog-content">
  <mat-form-field appearance="outline" class="w-full">
    <mat-label>Team name</mat-label>
    <input matInput [(ngModel)]="team.name" placeholder="Enter a team name" value="name"/>
  </mat-form-field>

  <mat-form-field appearance="outline" class="w-full">
    <mat-label>Description</mat-label>
    <textarea matInput [(ngModel)]="team.description" placeholder="Description of the team" value="description"></textarea>
  </mat-form-field>
</mat-dialog-content>

 <!-- Members -->
  <div class="members-section">
    <h3>Members</h3>

    <div class="member-item" *ngFor="let member of team.members; let i = index">
      <mat-icon>person</mat-icon>
      <div class="member-info">
        <span>{{ member.name }}</span>
        <small *ngIf="member.email">{{ member.email }}</small>
      </div>
      <button mat-icon-button color="warn" (click)="removeMember(i)">
        <mat-icon>delete</mat-icon>
      </button>
    </div>

    <!-- Add a member with autocomplete -->
    <div class="add-member">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Add member</mat-label>
        <input
          matInput
          [(ngModel)]="newMemberInput"
          (ngModelChange)="onMemberInputChange()"
          [matAutocomplete]="auto"
          placeholder="Search by name or email"
        />
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option
            *ngFor="let user of filteredUsers | async"
            (click)="addMember(user)"
            (keydown)="addMember(user)"
          >
            <div class="user-option">
              <span>{{ user.name }}</span>
              <small *ngIf="user.email">{{ user.email }}</small>
            </div>
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>
  </div>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancel</button>
  <button mat-flat-button color="primary" (click)="onSave()">Edit</button>
</mat-dialog-actions>
